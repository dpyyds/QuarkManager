# QuarkManager 夸克管家

<p align="center">
  <img src="https://img.shields.io/badge/Version-v1.1.0-brightgreen?style=flat-square" alt="Version">
  <img src="https://img.shields.io/badge/Platform-Windows-blue?style=flat-square" alt="Platform">
  <img src="https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat-square&logo=go" alt="Go">
  <img src="https://img.shields.io/badge/Vue-3.x-4FC08D?style=flat-square&logo=vue.js" alt="Vue">
  <img src="https://img.shields.io/badge/Wails-2.x-red?style=flat-square" alt="Wails">
</p>

<p align="center">
  <b>🚀 一款现代化的夸克网盘第三方桌面客户端</b>
</p>

<p align="center">
  基于 Wails + Vue3 + Element Plus 打造，提供简洁优雅的用户界面和强大的功能
</p>

## ⚠️ 免责声明

- 本软件为**第三方开发工具**，与夸克网盘官方无任何关联
- **仅供个人学习、研究和技术交流使用**，请勿用于任何商业用途
- 使用本软件可能存在账号被封禁等风险，由此产生的一切后果由用户自行承担
- 如本软件侵犯了您的权益，请联系开发者，我们将及时处理
- 请遵守当地法律法规，不得利用本软件从事任何违法活动

## ✨ 功能特性

### 📁 文件管理
- 文件/文件夹浏览、搜索
- 面包屑导航、鼠标手势（左右拖动前进/后退）
- 键盘快捷键（Alt+←/→/Home）
- 新建文件夹
- 文件重命名、删除、移动
- 文件上传（支持原生文件选择对话框）
- 批量操作（多选删除、下载）

### ⬇️ 下载管理
- 单文件下载（支持断点续传）
- 批量下载（一次选择保存位置）
- 文件夹下载（递归下载，保持目录结构）
- 可配置并发数（全局并发、文件夹内并发）
- 实时进度显示（进度条、速度、大小）
- 任务管理（暂停、恢复、取消、删除）
- 状态分类和自动排序
- 大文件检测（50MB 限制提示）
- Cookie 认证支持

### 🔗 分享功能
- 创建分享链接（支持文件和文件夹）
- 自定义分享密码
- 设置分享有效期（1天/7天/30天/永久）
- 查看我的分享列表
- 取消分享
- 分享结果显示（链接、密码、一键复制）

### 💾 转存功能
- 转存他人分享链接
- 支持带密码的分享链接
- 自动解析分享链接
- 选择转存目标文件夹
- 批量转存支持

### 👥 多账户管理
- 支持多账户登录
- 账户快速切换
- 账户过期检测
- Cookie 自动保存与恢复
- 手动导入完整 Cookie（解决下载认证问题）

### 🌐 API 服务
- 内置 HTTP API 服务（端口 8080）
- Swagger API 文档
- 支持外部程序调用
- API 服务开关控制

### 📧 邮件通知
- Cookie 过期邮件提醒
- 自定义 SMTP 配置
- 支持 SSL/TLS 加密

## 🖼️ 界面预览

软件采用现代化 UI 设计，简洁优雅的浅色主题：

- 顶部导航栏：快速切换各功能模块
- 文件管理：类似文件管理器的操作体验，支持鼠标手势和键盘快捷键
- 下载管理：实时进度显示，支持暂停/恢复/取消
- 分享管理：一键创建和管理分享
- 设置中心：账户、API、邮件、下载配置等

## 🚀 快速开始

### 下载安装

从 [Releases](https://github.com/dpyyds/QuarkManager/releases) 页面下载最新版本的 `QuarkManager.exe`，双击运行即可。

### 登录账号

1. 启动软件后，点击右上角「登录」按钮
2. 使用夸克 APP 扫描二维码
3. 扫码成功后自动登录

### 导入 Cookie（可选，解决下载问题）

如果遇到下载失败（HTTP 403），需要手动导入完整 Cookie：

1. 打开浏览器，登录 [夸克网盘](https://pan.quark.cn)
2. 按 F12 打开开发者工具
3. 切换到「网络」(Network) 标签
4. 刷新页面，找到任意请求
5. 在请求头中找到 `Cookie` 字段，复制完整内容
6. 在软件「设置」→「账户管理」中点击「导入 Cookie」
7. 粘贴 Cookie 并保存

### 基本使用

1. **浏览文件**：在「文件」页面浏览网盘文件，支持鼠标手势导航
2. **上传文件**：点击上传按钮选择本地文件
3. **下载文件**：单击下载按钮或多选后批量下载
4. **创建分享**：选中文件后点击分享按钮
5. **转存文件**：在「转存」页面粘贴分享链接
6. **查看下载**：在「下载」页面查看下载进度和管理任务

## 🔧 进阶玩法

### 1. 下载管理

#### 配置并发数

在「下载」页面点击「下载设置」：

- **全局最大并发数** (1-10，默认 3)：同时下载的任务数
- **文件夹最大并发数** (1-10，默认 3)：文件夹内同时下载的文件数

#### 批量下载

1. 在文件列表中多选文件/文件夹（可混合选择）
2. 点击工具栏的「下载 (N)」按钮
3. 选择保存位置（只需选择一次）
4. 所有任务自动添加到下载队列

#### 大文件限制

- 网页端 API 限制：单文件不超过 **50MB**
- 超过限制的文件会在下载时标记为失败
- 建议使用夸克网盘官方客户端下载大文件

### 2. API 服务调用

开启 API 服务后，可通过 HTTP 接口操作网盘：

```bash
# 获取文件列表
curl http://localhost:8080/api/files?folder_id=0

# 创建分享
curl -X POST http://localhost:8080/api/share \
  -H "Content-Type: application/json" \
  -d '{"file_ids": ["xxx"], "title": "分享标题"}'

# 转存分享
curl -X POST http://localhost:8080/api/save \
  -H "Content-Type: application/json" \
  -d '{"share_url": "https://pan.quark.cn/s/xxx"}'
```

访问 `http://localhost:8080/swagger/` 查看完整 API 文档。

### 3. 多账户管理

在「设置」→「账户管理」中：

- **添加账户**：点击添加按钮扫码登录新账户
- **切换账户**：点击账户旁的「切换」/「登录」按钮
- **删除账户**：点击「删除」移除不需要的账户
- **检查过期**：定期检查账户 Cookie 是否过期
- **导入 Cookie**：手动导入浏览器完整 Cookie

### 4. 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| Alt + ← | 返回上一层 |
| Alt + → | 前进到下一层 |
| Alt + Home | 返回根目录 |

### 5. 鼠标手势

在文件列表区域：
- **向右拖动** - 返回上一层
- **向左拖动** - 前进到下一层

## 📝 更新日志

### v1.1.0 (2025-01-29)
- 🎉 **下载管理系统**
  - ✅ 完整的下载管理器，支持暂停/恢复/取消
  - ✅ 断点续传，自动恢复中断的下载
  - ✅ 批量下载，一次选择保存位置
  - ✅ 文件夹下载，递归下载并保持目录结构
  - ✅ 可配置并发数（全局并发、文件夹内并发）
  - ✅ 实时进度显示（进度条、速度、大小）
  - ✅ 任务状态自动排序和颜色标识
  
- 🔧 **Cookie 认证优化**
  - ✅ 支持手动导入完整 Cookie
  - ✅ 解决下载 HTTP 403 认证问题
  - ✅ Cookie 导入界面优化
  
- 🎯 **文件管理增强**
  - ✅ 鼠标手势导航（左右拖动前进/后退）
  - ✅ 键盘快捷键（Alt+←/→/Home）
  - ✅ 批量下载按钮，显示选中数量
  - ✅ 移除冗余的左右箭头按钮
  
- ⚠️ **大文件限制**
  - ✅ 自动检测超过 50MB 的文件
  - ✅ 详细的错误提示信息
  - ✅ 文件夹下载时显示失败文件列表
  
- 🐛 **Bug 修复**
  - ✅ 修复账户切换同步问题
  - ✅ 修复下载取消后仍显示成功的问题
  - ✅ 修复文件夹下载进度显示问题
  - ✅ 优化消息提示位置（offset: 80）

### v1.0.0 (2025-01)
- 🎉 首次发布
- ✅ 文件浏览、上传、下载
- ✅ 分享创建与管理
- ✅ 转存功能
- ✅ 多账户管理
- ✅ API 服务
- ✅ 邮件通知

---

## 👨‍💻 作者

**dpyyds**

- 项目地址: [QuarkManager](https://github.com/dpyyds/QuarkManager)

---

<p align="center">
  如果这个项目对你有帮助，欢迎 ⭐ Star 支持一下！
</p>
